(function(e){if("function"===typeof define&&define.amd)define(["JSRootPainter","d3"],e);else if("object"===typeof exports&&"undefined"!==typeof module)e(require("./JSRootCore.js"),require("d3"));else{if("object"!=typeof d3)throw Error("This extension requires d3.js","JSRootPainter.v7hist.js");if("undefined"==typeof JSROOT)throw Error("JSROOT is not defined","JSRootPainter.v7hist.js");if("object"!=typeof JSROOT.Painter)throw Error("JSROOT.Painter not defined","JSRootPainter.v7hist.js");e(JSROOT,d3)}})(function(e,
r){e.sources.push("v7more");e.v7.drawText=function(){var a=this.GetObject(),b=this.pad_painter();this.pad_width();this.pad_height();var c=b.GetCoordinate(a.fPos);b=this.v7EvalAttr("text_size",12);var d=-1*this.v7EvalAttr("text_angle",0),e=this.v7EvalAttr("text_align",22),h=this.v7EvalColor("text_color","black"),k=this.v7EvalAttr("text_font",41);this.CreateG(!1);a={align:e,x:c.x,y:c.y,text:a.fText,rotate:d,color:h,latex:1};this.StartTextDrawing(k,b);this.DrawText(a);this.FinishTextDrawing()};e.v7.drawLine=
function(){var a=this.GetObject(),b=this.pad_painter(),c=b.GetCoordinate(a.fP1);a=b.GetCoordinate(a.fP2);b=this.v7EvalAttr("line_width",1);var d=this.v7EvalAttr("line_style",1),f=this.v7EvalColor("line_color","black");this.CreateG();this.draw_g.append("svg:line").attr("x1",c.x).attr("y1",c.y).attr("x2",a.x).attr("y2",a.y).style("stroke",f).attr("stroke-width",b).style("stroke-dasharray",e.Painter.root_line_styles[d])};e.v7.drawBox=function(){var a=this.GetObject(),b=this.pad_painter(),c=b.GetCoordinate(a.fP1);
a=b.GetCoordinate(a.fP2);b=this.v7EvalAttr("box_border_width",1);var d=this.v7EvalAttr("box_border_style",1),f=this.v7EvalColor("box_border_color","black"),h=this.v7EvalColor("box_fill_color","white"),k=this.v7EvalAttr("box_fill_style",1),p=this.v7EvalAttr("box_round_width",0),q=this.v7EvalAttr("box_round_height",0);this.CreateG();0==k&&(h="none");this.draw_g.append("svg:rect").attr("x",c.x).attr("width",a.x-c.x).attr("y",a.y).attr("height",c.y-a.y).attr("rx",p).attr("ry",q).style("stroke",f).attr("stroke-width",
b).attr("fill",h).style("stroke-dasharray",e.Painter.root_line_styles[d])};e.v7.drawMarker=function(){var a=this.GetObject();a=this.pad_painter().GetCoordinate(a.fP);var b=this.v7EvalAttr("marker_size",1),c=this.v7EvalAttr("marker_style",1),d=this.v7EvalColor("marker_color","black");b=new e.TAttMarkerHandler({style:c,color:d,size:b});a=b.create(a.x,a.y);this.CreateG();a&&this.draw_g.append("svg:path").attr("d",a).call(b.func)};e.v7.drawLegend=function(a){var b=this.GetObject(),c=this.pad_painter(),
d=c.GetCoordinate(b.fP1);c=c.GetCoordinate(b.fP2);var f=this.v7EvalAttr("box_border_width",1),h=this.v7EvalAttr("box_border_style",1),k=this.v7EvalColor("box_border_color","black"),p=this.v7EvalColor("box_fill_color","white"),q=this.v7EvalAttr("box_fill_style",1),l=this.v7EvalAttr("title_size",20);a=-1*this.v7EvalAttr("title_angle",0);var m=this.v7EvalAttr("title_align",22),g=this.v7EvalColor("title_color","black"),n=this.v7EvalAttr("title_font",41);this.CreateG();0==q&&(p="none");this.draw_g.append("svg:rect").attr("x",
d.x).attr("width",c.x-d.x).attr("y",c.y).attr("height",d.y-c.y).style("stroke",k).attr("stroke-width",f).attr("fill",p).style("stroke-dasharray",e.Painter.root_line_styles[h]);f=b.fEntries.length;b.fTitle&&f++;a={align:m,rotate:a,color:g,latex:1};this.StartTextDrawing(n,l);l=0;b.fTitle&&(this.DrawText(e.extend({x:d.x+(c.x-d.x)/2,y:c.y-.5*(c.y-d.y)/(f+1),text:b.fTitle},a)),l++);for(n=0;n<b.fEntries.length;++n)g=b.fEntries[n],m=c.y-(l+.5)*(c.y-d.y)/(f+1),this.DrawText(e.extend({x:d.x+(c.x-d.x)/4,y:m,
text:g.fLabel},a)),(g=this.FindPainterFor(g.fDrawable.fIO))&&g.lineatt&&this.draw_g.append("svg:line").attr("x1",d.x+.5*(c.x-d.x)).attr("y1",m).attr("x2",d.x+.8*(c.x-d.x)).attr("y2",m).call(g.lineatt.func),l++;this.FinishTextDrawing()};return e});
